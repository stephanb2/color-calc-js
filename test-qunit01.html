<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Color calculator</title>
 
  <link rel="stylesheet" href="css/qunit.css">
  <script src="js/qunit.js"></script>
  <script src="js/jquery-1.9.1.min.js"></script>
  <script src="js/macbeth02test.js"></script>
 
  <script>
  module("math functions");
  test("matrix operations", function() {
    var result;
    
    result = SB.calc.matrixMult([[1,0],[0,1]], [[2,3],[4,5]]);
    deepEqual(result, [[2,3],[4,5]], "unity matrix multiplication");  
    
    result = SB.calc.matrixMult([[0,1],[1,0]], [[2,3],[4,5]]);
    deepEqual(result, [[4,5],[2,3]], "matrix transpose");   
    
    result = SB.calc.matrixMult([[1,1],[0,-1]], [[2,3],[4,5]]); 
    deepEqual(result, [[6, 8], [-4, -5]], "2x2 matrix multiplication");
    
    result = SB.calc.matrixMult([[1,1],[0,-1]], [2,3]);
    deepEqual(result, [5, -3], "matrix * vector multiplication");
    
    result = SB.calc.matrixMult([2,3], [[1,1],[0,-1]]);
    deepEqual(result, [2, -1], "vector * matrix multiplication");
    
    result = SB.calc.diagMatrix([2, 3, 5]);
    deepEqual(result, [[2,0,0],[0,3,0],[0,0,5]], "diagonal matrix from vector");
  });
  
  test("functions inner product", function() {
    var fA = {
        "start":10, "end":100, "step":10,
        "x":[0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
    };
    var fdirac = {
        "start":10, "end":100, "step":10,
        "x":[0, 0, 0, 0, 1, 0, 0, 0, 0, 0 ]
    };
    var funity = {
        "start":10, "end":100, "step":10,
        "x":[1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
        "y":[1, 1, 1, 1, 1, 0, 0, 0, 0, 0 ]
    };
    var funityB = {
         "start":10, "end":50, "step":10,
          "x":[1, 1, 1, 1, 1 ]
    };
          
    equal(SB.calc.sumProduct(fdirac, "x", funity, "x"), 1);
    equal(SB.calc.sumProduct(fA, "x", funity, "x"), 5*9);
    equal(SB.calc.sumProduct(funity, "x", funity, "x"), 10);
    equal(SB.calc.sumProduct(funity, "x", funity, "y"), 5);
    equal(SB.calc.sumProduct(funity, "x", funityB, "x"), 5);
    equal(SB.calc.sumProduct(fA, "x", funity, "y"), 8+2);
  });  
  
  
  
  module("UX and DOM manipulation");
  test("SB.macbeth.buildCCTable", function() {
    SB.macbeth.buildCCTable("#colorTable");
    
    var table = document.getElementById("colorTable");
    
    equal(table.rows.length, 4, "table has 4 rows");
    equal(table.rows[0].cells.length, 6, "table has 6 columns");
    equal(table.rows[0].cells[0].innerHTML, "A1", "CCTable[0,0] is A1");
    equal(table.rows[1].cells[0].innerHTML, "B1", "CCTable[1,0] is B1"); 
    equal(table.rows[3].cells[5].innerHTML, "D6", "CCTable[3,5] is D6");   
  });
  </script>
  
  <style>
     #qunit { padding: 0 4em;}
  </style>
</head>
<body>
 
<div id="qunit"></div>

<div id="qunit-fixture">
    <table id="colorTable"></table>
    <!-- ColorChecker UI. Table is generated by SB.macbeth.buildCCTable -->
    
    <table class="dataTable">
    <!-- Results table. Values are inserted by SB.macbeth.showResults -->
        <tr id="XYZ"></tr>
        <tr id="xyY"></tr>
        <tr id="Lab"></tr>
        <tr id="Luv"></tr>
    </table>
    

</div>

</body>
</html>

